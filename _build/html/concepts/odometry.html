<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Odometry &mdash; ROS2 Lunabot  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Coordinate Frames" href="coord-frames.html" />
    <link rel="prev" title="Messages" href="msgs.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ROS2 Lunabot
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/lunabotics.html">Intro to Lunabotics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installing-ros-linux.html">Installing ROS2 on Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installing-ros-mac.html">Installing ROS2 on macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installing-ros-windows.html">Installing ROS2 on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/virtual-machine.html">Virtual Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/repo-setup.html">Repository Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/vs-code.html">Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/commands.html">Command Line Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/git.html">Git Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/best-practices.html">Best Practices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Intro Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../projects/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/project1.html">Project 1: Keyboard Node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/project2.html">Project 2: State Machine</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Important Concepts</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros.html">ROS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="msgs.html">Messages</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Odometry</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#wheel-odometry">Wheel Odometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visual-odometry">Visual Odometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#imu-odometry">IMU Odometry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="coord-frames.html">Coordinate Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="rotation.html">Representing Rotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="slam.html">Localization &amp; Mapping</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MoveIt, From Start to Finish</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../moveit/installing.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../moveit/urdf.html">Modeling the robot: URDFs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../moveit/moveit.html">Moving your model: MoveIt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../moveit/hardware.html">ROS2 Control Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">State Machine</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../state_machine/index.html">Basics &amp; Setting Up States</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ROS Phoenix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ros_phoenix/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros_phoenix/design.html">Package Design</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Teleop Control</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../teleop_control/index.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Realsense</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../realsense/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../realsense/launch.html">Launch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../realsense/parameters.html">Parameters</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RTABMAP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rtabmap/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rtabmap/launch.html">Launch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rtabmap/parameters.html">Parameters</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Navigation2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../navigation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../navigation/launch.html">Launch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../navigation/parameters.html">Parameters</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lidar</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../lidar/installation.html">Urg Node Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lidar/electrical-setup.html">Electrical Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lidar/launchurgnode.html">Launch Urg Node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lidar/launchlocalization.html">Launch Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lidar/parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lidar/localizationtheory.html">Localization Theory</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS2 Lunabot</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Odometry</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/concepts/odometry.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="odometry">
<h1>Odometry<a class="headerlink" href="#odometry" title="Permalink to this heading"></a></h1>
<p>Odometry is the use of motion sensors to <em>estimate</em> the robot’s change in position relative to its initial position.</p>
<p>The ROS odometry message consists of a pose with covariance (position &amp; orientation with uncertainty) and a twist with covariance (linear &amp; angular velocities with uncertainty).</p>
<p><strong>Further Reading:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://springerplus.springeropen.com/articles/10.1186/s40064-016-3573-7">(Paper) Review of Odometry Techniques</a></p></li>
<li><p><a class="reference external" href="https://web2.qatar.cmu.edu/~gdicaro/16311-Fall17/slides/16311-LabNotes-Odometry-ROSFrames.pdf">(Slides) Odometry &amp; Reference Frames</a></p></li>
</ul>
<section id="wheel-odometry">
<h2>Wheel Odometry<a class="headerlink" href="#wheel-odometry" title="Permalink to this heading"></a></h2>
<p>If a robot is traveling in a straight line and  the diameter of its wheels is known, then by counting the number of wheel revolutions we can calculate how far it has traveled: distance = revolutions * circumference of wheel. While this is an overly simplified example, this is the basic idea behind wheel odometry which uses encoders to count the number of wheel or motor rotations over a certain timestep.</p>
<p>Odometry is a cumulative measurement so errors will accumulate as time increases. Read this <a class="reference external" href="https://groups.csail.mit.edu/drl/courses/cs54-2001s/odometry.html">article</a> to get a better intuition for how wheel odometry errors occur.</p>
<p>In our robot which must move and turn on sand, the main source of wheel odometry error is when wheels get stuck spinning in the sand, drastically increasing the drift in the wheel odometry estimate from the true value. Due to this reason, we are unlikely to use wheel odometry for our robot, though it is good to be aware of since it is often used in indoor environments where slippage is drastically less.</p>
</section>
<section id="visual-odometry">
<h2>Visual Odometry<a class="headerlink" href="#visual-odometry" title="Permalink to this heading"></a></h2>
<p>Visual odometry estimates the motion of the robot using sequential images from a camera.</p>
<p>Here is what occurs at a high level to estimate the motion of robot between two camera frames:</p>
<ol class="arabic simple">
<li><p>Features are detected in the current frame</p></li>
<li><p>Features in the current frame are matched with the same features from the previous frame</p></li>
<li><p>Motion estimate is generated based on how far certain features moved between the previous and current frame
This use of image processing in robotics is computationally expensive, but can yield better odometry estimates than wheel odometry (immune to wheel slippage) and IMU odometry in many cases.</p></li>
</ol>
<p>One of the main challenges of using visual odometry for our robot on a simualted lunar environment is the lack of unique features on the lunar surface that the camera is pointed at. Another challenge is with lighting as shadows from objects and even the robot itself can introduce drift into the odometry estimates.</p>
<p>While these challenges make it difficult to accurately estimate odometry, we can be inspired by the success NASA has had in using visual odometry for the Mars rovers.</p>
<p>One thing to look into in the future is the difference odometry estimates between monocular and stereo cameras since monocular cameras lack the sense of depth that that stereo cameras can achieve by having two cameras at different angles.</p>
<p><strong>Further Reading:</strong> <a class="reference external" href="http://www.cs.toronto.edu/~urtasun/courses/CSC2541/03_odometry.pdf">(Slides) Visual Odometry</a></p>
</section>
<section id="imu-odometry">
<h2>IMU Odometry<a class="headerlink" href="#imu-odometry" title="Permalink to this heading"></a></h2>
<p>Inertial measurement units (comprised of accelerometers &amp; a gyroscope) provide linear and angular acceleration as well as orientation. The accelerations can be integrated to get a linear and angular velocity estimate which in turn can be intergrated to get a position and orientation estimate.</p>
<p>It is important to keep in mind that each integration adds drift from the true value, so the drift associated with the position and velocity estimates from the IMU is quite high. Cheaper IMUs are less precise meaning the drift in measured acceleration from true acceleration is often too high to make the resulting position and velocity estimates of any use.</p>
<p>We have had issues with the IMU data from the Realsense D435i (i stands for IMU) so goal for this year is to use a seperate IMU module to hopefully acheive better results.</p>
<p>Given better IMU odometry, we can fuse it with the visual odometry estimate in a sensor fusion algorithm to produce a better odometry estimate than either could produce on their own. While in theory this sounds great, in practice this has proven quite challenging fusing together odometry estimates to get a better estimate. You can read more on sensor fusion in a following article.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="msgs.html" class="btn btn-neutral float-left" title="Messages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="coord-frames.html" class="btn btn-neutral float-right" title="Coordinate Frames" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Vanderbilt Robotics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>